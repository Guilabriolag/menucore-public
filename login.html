<script type="module">
  import { login } from './js/auth.js'

  const form = document.getElementById('loginForm')

  form.addEventListener('submit', async (e) => {
    e.preventDefault()

    const emailInput = document.getElementById('email')
    const passwordInput = document.getElementById('password')

    const email = emailInput.value.trim()
    const password = passwordInput.value

    if (!email) {
      alert('Informe o email')
      return
    }

    const user = await login(email, password)

    // ðŸ”€ redirecionamento baseado na role
    if (user.role === 'admin') {
      window.location.href = 'painel.html'
    } else if (user.role === 'kitchen') {
      window.location.href = 'cozinha.html'
    } else {
      window.location.href = 'index.html'
    }
  })
</script>
